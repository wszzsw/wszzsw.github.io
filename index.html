<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Palworld Collection Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a2332 50%, #2d3748 100%);
            min-height: 100vh;
            color: #ffffff;
            overflow-x: hidden;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, #4299e1 0%, #9f7aea 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo p {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 0.5rem;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .header-title {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #4299e1 0%, #9f7aea 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4299e1 0%, #9f7aea 100%);
            color: white;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(66, 153, 225, 0.3);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1.5rem;
            margin-bottom: 1rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #4299e1, #9f7aea);
        }

        .stat-label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }

        .stat-progress {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 1rem;
        }

        .stat-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4299e1, #9f7aea);
            transition: width 0.6s ease;
        }

        /* Controls */
        .controls {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: center;
        }

        .search-container {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 3rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #4299e1;
            background: rgba(255, 255, 255, 0.15);
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.5);
        }

        .filter-group {
            display: flex;
            gap: 0.5rem;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #4299e1 0%, #9f7aea 100%);
            border-color: transparent;
            color: white;
        }

        .filter-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-1px);
        }

        /* Table Container */
        .table-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            overflow: hidden;
            position: relative;
        }

        .table-background {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('https://images.unsplash.com/photo-1578662996442-48f60103fc96?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            filter: blur(8px) opacity(0.15);
            transform: scale(1.1);
            transition: transform 0.1s ease-out;
            z-index: -1;
        }

        .table-wrapper {
            overflow-x: auto;
            max-height: 69vh;
            overflow-y: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: rgba(15, 20, 25, 0.8);
            color: rgba(255, 255, 255, 0.9);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: sticky;
            top: 0;
            z-index: 10;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            vertical-align: middle;
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .pal-number {
            font-weight: 700;
            color: #4299e1;
            font-size: 0.9rem;
            min-width: 60px;
        }

        .pal-name {
            font-weight: 600;
            min-width: 150px;
        }

        .pal-name a {
            color: #ffffff;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .pal-name a:hover {
            color: #4299e1;
        }

        .element {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            color: white;
            margin: 0.125rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .fire { background: linear-gradient(135deg, #f56565, #e53e3e); }
        .water { background: linear-gradient(135deg, #4299e1, #3182ce); }
        .grass { background: linear-gradient(135deg, #48bb78, #38a169); }
        .electric { background: linear-gradient(135deg, #ed8936, #dd6b20); }
        .ice { background: linear-gradient(135deg, #63b3ed, #4299e1); }
        .ground { background: linear-gradient(135deg, #a0aec0, #718096); }
        .dark { background: linear-gradient(135deg, #4a5568, #2d3748); }
        .dragon { background: linear-gradient(135deg, #9f7aea, #805ad5); }
        .neutral { background: linear-gradient(135deg, #a0aec0, #718096); }

        .input-field {
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            text-align: center;
            font-weight: 600;
            width: 70px;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: #4299e1;
            background: rgba(255, 255, 255, 0.15);
        }

        .needed-badge {
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            font-weight: 600;
            text-align: center;
            min-width: 60px;
            font-size: 0.85rem;
        }

        .needed-badge.complete {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
        }

        .needed-badge.partial {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
            color: white;
        }

        .needed-badge.none {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
        }

        .medal-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #ffd700;
            transform: scale(1.2);
        }

        .hidden {
            display: none;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .main-content {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: repeat(5, 1fr);
                gap: 0.75rem;
            }

            .stat-card {
                padding: 1rem;
            }

            .stat-value {
                font-size: 1.8rem;
            }

            .stat-label {
                font-size: 0.75rem;
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .search-container {
                min-width: auto;
            }
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 2rem;
            right: 2rem;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            backdrop-filter: blur(20px);
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.success {
            background: linear-gradient(135deg, rgba(72, 187, 120, 0.9), rgba(56, 161, 105, 0.9));
            border: 1px solid rgba(72, 187, 120, 0.3);
        }

        .notification.error {
            background: linear-gradient(135deg, rgba(245, 101, 101, 0.9), rgba(229, 62, 62, 0.9));
            border: 1px solid rgba(245, 101, 101, 0.3);
        }

        /*Caught Input*/
        .caught-input {
            padding: 0.75rem 0.5rem;
            background: rgba(15, 20, 25, 0.8);
            border: 2px solid rgba(66, 153, 225, 0.3);
            border-radius: 10px;
            color: white;
            text-align: center;
            font-weight: 600;
            font-size: 0.95rem;
            width: 80px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .caught-input:focus {
            outline: none;
            border-color: #4299e1;
            background: rgba(66, 153, 225, 0.15);
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
            transform: scale(1.05);
        }

        .caught-input:hover {
            border-color: rgba(66, 153, 225, 0.5);
            background: rgba(15, 20, 25, 0.9);
        }

        /* Chrome, Safari, Edge, Opera */
        .caught-input::-webkit-outer-spin-button,
        .caught-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Firefox */
        .caught-input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-title">Pal Tracker</div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="document.getElementById('csvImport').click()">
                        📥 Import
                    </button>
                    <button class="btn btn-primary" onclick="exportToCSV()">
                        📊 Export
                    </button>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Total Pals</div>
                    <div class="stat-value" id="totalPals">155</div>
                    <div class="stat-progress">
                        <div class="stat-progress-fill" style="width: 100%"></div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-label">Complete (12+)</div>
                    <div class="stat-value" id="completePals">0</div>
                    <div class="stat-progress">
                        <div class="stat-progress-fill" id="completeProgress" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-label">Total Caught</div>
                    <div class="stat-value" id="totalCaught">0</div>
                    <div class="stat-progress">
                        <div class="stat-progress-fill" id="caughtProgress" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-label">🏅 Medals Earned</div>
                    <div class="stat-value" id="medalsEarned">0</div>
                    <div class="stat-progress">
                        <div class="stat-progress-fill" id="medalProgress" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-label">Progress</div>
                    <div class="stat-value" id="progressPercent">0%</div>
                    <div class="stat-progress">
                        <div class="stat-progress-fill" id="overallProgress" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <div class="search-container">
                    <div class="search-icon">🔍</div>
                    <input type="text" class="search-input" placeholder="Search Pals by name or number..." id="searchInput">
                </div>
                
                <div class="filter-group">
                    <button class="filter-btn active" data-filter="all">All Pals</button>
                    <button class="filter-btn" data-filter="needed">Need More</button>
                    <button class="filter-btn" data-filter="complete">Complete</button>
                </div>
            </div>

            <!-- Table -->
            <div class="table-container" id="tableContainer">
                <div class="table-background" id="tableBackground"></div>
                <div class="table-wrapper">
                    <table id="palTable">
                        <thead>
                            <tr>
                                <th>No.</th>
                                <th>Pal Name</th>
                                <th>Element(s)</th>
                                <th>Partner Skill</th>
                                <th>Work Suitability</th>
                                <th>Caught</th>
                                <th>Still Need</th>
                                <th>Medal</th>
                            </tr>
                        </thead>
                        <tbody id="palTableBody">
                            <!-- Pal data will be inserted here by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Hidden file input -->
            <input type="file" id="csvImport" accept=".csv" style="display: none;" onchange="importFromCSV(event)">
        </div>
    </div>


    <script>
        const palData = [
            {no: "001", name: "Lamball", elements: ["Neutral"], skill: "Fluffy Shield", work: "Handiwork Lv1, Transporting Lv1, Farming Lv1"},
            {no: "002", name: "Cattiva", elements: ["Neutral"], skill: "Cat Helper", work: "Handiwork Lv1, Gathering Lv1, Mining Lv1, Transporting Lv1"},
            {no: "003", name: "Chikipi", elements: ["Neutral"], skill: "Egg Layer", work: "Gathering Lv1, Farming Lv1"},
            {no: "004", name: "Lifmunk", elements: ["Grass"], skill: "Lifmunk Recoil", work: "Planting Lv1, Handiwork Lv1, Lumbering Lv1, Medicine Production Lv1, Gathering Lv1"},
            {no: "005", name: "Foxparks", elements: ["Fire"], skill: "Huggy Fire", work: "Kindling Lv1"},
            {no: "005B", name: "Foxparks Cryst", elements: ["Ice"], skill: "Huggy Ice", work: "Cooling Lv1"},
            {no: "006", name: "Fuack", elements: ["Water"], skill: "Surfing Slam", work: "Handiwork Lv1, Transporting Lv1, Watering Lv1"},
            {no: "007", name: "Sparkit", elements: ["Electric"], skill: "Static Electricity", work: "Handiwork Lv1, Transporting Lv1, Generating Electricity Lv1"},
            {no: "008", name: "Tanzee", elements: ["Grass"], skill: "Cheery Rifle", work: "Planting Lv1, Handiwork Lv1, Lumbering Lv1, Transporting Lv1, Gathering Lv1"},
            {no: "009", name: "Rooby", elements: ["Fire"], skill: "Tiny Spark", work: "Kindling Lv1"},
            {no: "010", name: "Pengullet", elements: ["Water", "Ice"], skill: "Pengullet Cannon", work: "Handiwork Lv1, Transporting Lv1, Watering Lv1, Cooling Lv1"},
            {no: "010B", name: "Pengullet Lux", elements: ["Electric"], skill: "Pengullet Lux Launcher", work: "Handiwork Lv1, Transporting Lv1, Generating Electricity Lv1"},
            {no: "011", name: "Penking", elements: ["Water", "Ice"], skill: "Brave Sailor", work: "Handiwork Lv2, Transporting Lv2, Watering Lv2, Mining Lv2, Cooling Lv2"},
            {no: "011B", name: "Penking Lux", elements: ["Electric"], skill: "Electric Commander", work: "Handiwork Lv2, Transporting Lv2, Generating Electricity Lv2"},
            {no: "012", name: "Jolthog", elements: ["Electric"], skill: "Jolt Bomb", work: "Generating Electricity Lv1"},
            {no: "012B", name: "Jolthog Cryst", elements: ["Ice"], skill: "Cold Bomb", work: "Cooling Lv1"},
            {no: "013", name: "Gumoss", elements: ["Grass"], skill: "Logging Assistance", work: "Planting Lv1"},
            {no: "014", name: "Vixy", elements: ["Neutral"], skill: "Dig Here!", work: "Gathering Lv1, Farming Lv1"},
            {no: "015", name: "Hoocrates", elements: ["Dark"], skill: "Dark Knowledge", work: "Gathering Lv1"},
            {no: "016", name: "Teafant", elements: ["Water"], skill: "Soothing Shower", work: "Watering Lv1"},
            {no: "017", name: "Depresso", elements: ["Dark"], skill: "Caffeine Inoculation", work: "Handiwork Lv1, Transporting Lv1, Mining Lv1"},
            {no: "018", name: "Cremis", elements: ["Neutral"], skill: "Fluffy Wool", work: "Gathering Lv1, Farming Lv1"},
            {no: "019", name: "Daedream", elements: ["Dark"], skill: "Dream Chaser", work: "Handiwork Lv1, Transporting Lv1, Gathering Lv1"},
            {no: "020", name: "Rushoar", elements: ["Ground"], skill: "Hard Head", work: "Mining Lv1"},
            {no: "021", name: "Nox", elements: ["Dark"], skill: "Kuudere", work: "Gathering Lv1"},
            {no: "022", name: "Fuddler", elements: ["Ground"], skill: "Ore Detector", work: "Handiwork Lv1, Transporting Lv1, Mining Lv1"},
            {no: "023", name: "Killamari", elements: ["Dark"], skill: "Fried Squid", work: "Transporting Lv2, Gathering Lv1"},
            {no: "023B", name: "Killamari Primo", elements: ["Water", "Dark"], skill: "Primo Squid", work: "Watering Lv2, Transporting Lv2, Gathering Lv1"},
            {no: "024", name: "Mau", elements: ["Dark"], skill: "Gold Digger", work: "Farming Lv1"},
            {no: "024B", name: "Mau Cryst", elements: ["Ice"], skill: "Gold Digger", work: "Cooling Lv1, Farming Lv1"},
            {no: "025", name: "Celaray", elements: ["Water"], skill: "Zephyr Glider", work: "Transporting Lv1, Watering Lv1"},
            {no: "025B", name: "Celaray Lux", elements: ["Electric"], skill: "Thunder Glider", work: "Transporting Lv1, Generating Electricity Lv1"},
            {no: "026", name: "Direhowl", elements: ["Neutral"], skill: "Direhowl Rider", work: "Gathering Lv1"},
            {no: "027", name: "Tocotoco", elements: ["Neutral"], skill: "Eggbomb Launcher", work: "Gathering Lv1"},
            {no: "028", name: "Flopie", elements: ["Grass"], skill: "Helper Bunny", work: "Planting Lv1, Handiwork Lv1, Medicine Production Lv1, Transporting Lv1, Gathering Lv1"},
            {no: "029", name: "Mozzarina", elements: ["Neutral"], skill: "Milk Maker", work: "Farming Lv1"},
            {no: "030", name: "Bristla", elements: ["Grass"], skill: "Princess Gaze", work: "Planting Lv1, Handiwork Lv1, Medicine Production Lv2, Transporting Lv1, Gathering Lv1"},
            {no: "031", name: "Gobfin", elements: ["Water"], skill: "Angry Shark", work: "Handiwork Lv1, Transporting Lv1, Watering Lv2"},
            {no: "031B", name: "Gobfin Ignis", elements: ["Fire"], skill: "Angry Shark", work: "Handiwork Lv1, Transporting Lv1, Kindling Lv2"},
            {no: "032", name: "Hangyu", elements: ["Ground"], skill: "Flying Trapeze", work: "Handiwork Lv1, Transporting Lv2, Gathering Lv1"},
            {no: "032B", name: "Hangyu Cryst", elements: ["Ice"], skill: "Flying Trapeze", work: "Handiwork Lv1, Transporting Lv2, Gathering Lv1, Cooling Lv1"},
            {no: "033", name: "Mossanda", elements: ["Grass"], skill: "Grenadier Panda", work: "Planting Lv2, Handiwork Lv2, Lumbering Lv2, Transporting Lv3"},
            {no: "033B", name: "Mossanda Lux", elements: ["Electric"], skill: "Grenadier Panda", work: "Generating Electricity Lv2, Handiwork Lv2, Lumbering Lv2, Transporting Lv3"},
            {no: "034", name: "Woolipop", elements: ["Neutral"], skill: "Candy Pop", work: "Farming Lv1"},
            {no: "035", name: "Caprity", elements: ["Grass"], skill: "Berry Picker", work: "Planting Lv2, Farming Lv1"},
            {no: "035B", name: "Caprity Noct", elements: ["Dark"], skill: "Berry Picker", work: "Gathering Lv2, Farming Lv1"},
            {no: "036", name: "Melpaca", elements: ["Neutral"], skill: "Pacapaca Wool", work: "Farming Lv1"},
            {no: "037", name: "Eikthyrdeer", elements: ["Neutral"], skill: "Guardian of the Forest", work: "Lumbering Lv2"},
            {no: "037B", name: "Eikthyrdeer Terra", elements: ["Ground"], skill: "Guardian of the Forest", work: "Lumbering Lv2, Mining Lv1"},
            {no: "038", name: "Nitewing", elements: ["Neutral"], skill: "Travel Companion", work: "Gathering Lv2"},
            {no: "039", name: "Ribunny", elements: ["Neutral"], skill: "Skilled Fingers", work: "Handiwork Lv1, Transporting Lv1, Gathering Lv1"},
            {no: "039B", name: "Ribunny Botan", elements: ["Grass"], skill: "Skilled Fingers", work: "Planting Lv1, Handiwork Lv1, Transporting Lv1, Gathering Lv1"},
            {no: "040", name: "Incineram", elements: ["Fire", "Dark"], skill: "Flameclaw Hunter", work: "Kindling Lv1, Handiwork Lv2, Transporting Lv2, Mining Lv1"},
            {no: "040B", name: "Incineram Noct", elements: ["Dark"], skill: "Flameclaw Hunter", work: "Handiwork Lv2, Transporting Lv2, Mining Lv1"},
            {no: "041", name: "Cinnamoth", elements: ["Grass"], skill: "Mysterious Scales", work: "Planting Lv2, Medicine Production Lv1"},
            {no: "042", name: "Arsox", elements: ["Fire"], skill: "Warm Body", work: "Kindling Lv2, Lumbering Lv1"},
            {no: "043", name: "Dumud", elements: ["Ground"], skill: "Soil Improver", work: "Transporting Lv1, Watering Lv1, Mining Lv2"},
            {no: "043B", name: "Dumud Gild", elements: ["Ground"], skill: "Gold Rush", work: "Transporting Lv1, Watering Lv1, Mining Lv2, Farming Lv1"},
            {no: "044", name: "Cawgnito", elements: ["Dark"], skill: "Telepeck", work: "Lumbering Lv1"},
            {no: "045", name: "Leezpunk", elements: ["Dark"], skill: "Sixth Sense", work: "Handiwork Lv1, Transporting Lv1, Gathering Lv1"},
            {no: "045B", name: "Leezpunk Ignis", elements: ["Fire"], skill: "Sixth Sense", work: "Kindling Lv1, Handiwork Lv1, Transporting Lv1, Gathering Lv1"},
            {no: "046", name: "Loupmoon", elements: ["Dark"], skill: "Claws Glistening in the Dark", work: "Handiwork Lv2"},
            {no: "046B", name: "Loupmoon Cryst", elements: ["Ice"], skill: "Claws Glistening in the Dark", work: "Handiwork Lv2, Cooling Lv1"},
            {no: "047", name: "Galeclaw", elements: ["Neutral"], skill: "Galeclaw Rider", work: "Gathering Lv2"},
            {no: "048", name: "Robinquill", elements: ["Grass"], skill: "Hawk Eye", work: "Planting Lv1, Handiwork Lv2, Lumbering Lv1, Medicine Production Lv1, Transporting Lv2, Gathering Lv2"},
            {no: "048B", name: "Robinquill Terra", elements: ["Ground"], skill: "Hawk Eye", work: "Handiwork Lv2, Lumbering Lv1, Medicine Production Lv1, Transporting Lv2, Gathering Lv2, Mining Lv1"},
            {no: "049", name: "Gorirat", elements: ["Neutral"], skill: "Full-power Gorilla Mode", work: "Handiwork Lv1, Lumbering Lv2, Transporting Lv3"},
            {no: "049B", name: "Gorirat Terra", elements: ["Ground"], skill: "Full-power Gorilla Mode", work: "Handiwork Lv1, Lumbering Lv2, Transporting Lv3, Mining Lv1"},
            {no: "050", name: "Beegarde", elements: ["Grass"], skill: "Worker Bee", work: "Planting Lv1, Handiwork Lv1, Lumbering Lv1, Medicine Production Lv1, Transporting Lv2, Gathering Lv1, Farming Lv1"},
            {no: "051", name: "Elizabee", elements: ["Grass"], skill: "Queen Bee Command", work: "Planting Lv2, Handiwork Lv2, Lumbering Lv1, Medicine Production Lv2, Gathering Lv2"},
            {no: "052", name: "Grintale", elements: ["Neutral"], skill: "Plump Body", work: "Gathering Lv2"},
            {no: "053", name: "Swee", elements: ["Ice"], skill: "Fluffy", work: "Gathering Lv1, Cooling Lv1"},
            {no: "054", name: "Sweepa", elements: ["Ice"], skill: "King of Fluff", work: "Gathering Lv2, Cooling Lv2"},
            {no: "055", name: "Chillet", elements: ["Ice", "Dragon"], skill: "Wriggling Weasel", work: "Gathering Lv1, Cooling Lv1"},
            {no: "055B", name: "Chillet Ignis", elements: ["Fire", "Dragon"], skill: "Wriggling Weasel", work: "Gathering Lv1, Kindling Lv1"},
            {no: "056", name: "Univolt", elements: ["Electric"], skill: "Swift Deity", work: "Lumbering Lv1, Generating Electricity Lv2"},
            {no: "057", name: "Foxcicle", elements: ["Ice"], skill: "Aurora Guide", work: "Cooling Lv2"},
            {no: "058", name: "Pyrin", elements: ["Fire"], skill: "Red Hare", work: "Kindling Lv2, Lumbering Lv1"},
            {no: "058B", name: "Pyrin Noct", elements: ["Dark"], skill: "Red Hare", work: "Lumbering Lv1"},
            {no: "059", name: "Reindrix", elements: ["Ice"], skill: "Cool Body", work: "Lumbering Lv2, Cooling Lv2"},
            {no: "060", name: "Rayhound", elements: ["Electric"], skill: "Jumping Force", work: "Generating Electricity Lv2"},
            {no: "061", name: "Kitsun", elements: ["Fire"], skill: "Clear Mind", work: "Kindling Lv2"},
            {no: "061B", name: "Kitsun Noct", elements: ["Dark"], skill: "Clear Mind", work: ""},
            {no: "062", name: "Dazzi", elements: ["Electric"], skill: "Lady of Lightning", work: "Handiwork Lv1, Transporting Lv1, Generating Electricity Lv1"},
            {no: "062B", name: "Dazzi Noct", elements: ["Dark"], skill: "Lady of Lightning", work: "Handiwork Lv1, Transporting Lv1"},
            {no: "063", name: "Lunaris", elements: ["Neutral"], skill: "Antigravity", work: "Handiwork Lv3, Transporting Lv1, Gathering Lv1"},
            {no: "064", name: "Dinossom", elements: ["Grass", "Dragon"], skill: "Fragrant Dragon", work: "Planting Lv2, Lumbering Lv2"},
            {no: "064B", name: "Dinossom Lux", elements: ["Electric", "Dragon"], skill: "Fragrant Dragon", work: "Generating Electricity Lv2, Lumbering Lv2"},
            {no: "065", name: "Surfent", elements: ["Water"], skill: "Swift Swimmer", work: "Watering Lv2"},
            {no: "065B", name: "Surfent Terra", elements: ["Ground"], skill: "Swift Swimmer", work: "Mining Lv2"},
            {no: "066", name: "Maraith", elements: ["Dark"], skill: "Messenger of Death", work: "Gathering Lv2, Mining Lv1"},
            {no: "067", name: "Digtoise", elements: ["Ground"], skill: "Drill Crusher", work: "Mining Lv3"},
            {no: "068", name: "Tombat", elements: ["Dark"], skill: "Ultrasonic Sensor", work: "Transporting Lv2, Gathering Lv2, Mining Lv2"},
            {no: "069", name: "Lovander", elements: ["Neutral"], skill: "Heart Drain", work: "Handiwork Lv2, Medicine Production Lv2, Transporting Lv2, Mining Lv1"},
            {no: "070", name: "Flambelle", elements: ["Fire"], skill: "Magma Tears", work: "Kindling Lv1, Handiwork Lv1, Transporting Lv1, Farming Lv1"},
            {no: "071", name: "Vanwyrm", elements: ["Fire", "Dark"], skill: "Aerial Marauder", work: "Kindling Lv1, Transporting Lv3"},
            {no: "071B", name: "Vanwyrm Cryst", elements: ["Ice", "Dark"], skill: "Aerial Marauder", work: "Cooling Lv1, Transporting Lv3"},
            {no: "072", name: "Bushi", elements: ["Fire"], skill: "Brandish Blade", work: "Kindling Lv2, Handiwork Lv1, Lumbering Lv3, Transporting Lv2, Gathering Lv1"},
            {no: "072B", name: "Bushi Noct", elements: ["Dark"], skill: "Brandish Blade", work: "Handiwork Lv1, Lumbering Lv3, Transporting Lv2, Gathering Lv1"},
            {no: "073", name: "Beakon", elements: ["Electric"], skill: "Thunderous", work: "Transporting Lv3, Generating Electricity Lv2, Gathering Lv1"},
            {no: "074", name: "Ragnahawk", elements: ["Fire"], skill: "Flame Wing", work: "Kindling Lv3, Transporting Lv3"},
            {no: "075", name: "Katress", elements: ["Dark"], skill: "Grimoire Collector", work: "Handiwork Lv2, Medicine Production Lv2, Transporting Lv2"},
            {no: "075B", name: "Katress Ignis", elements: ["Fire"], skill: "Grimoire Collector", work: "Kindling Lv2, Handiwork Lv2, Medicine Production Lv2, Transporting Lv2"},
            {no: "076", name: "Wixen", elements: ["Fire"], skill: "Lord Fox", work: "Kindling Lv2, Handiwork Lv3, Transporting Lv2"},
            {no: "076B", name: "Wixen Noct", elements: ["Dark"], skill: "Lord Fox", work: "Handiwork Lv3, Transporting Lv2"},
            {no: "077", name: "Verdash", elements: ["Grass"], skill: "Grassland Speedster", work: "Planting Lv2, Handiwork Lv3, Lumbering Lv2, Transporting Lv2, Gathering Lv3"},
            {no: "078", name: "Vaelet", elements: ["Grass"], skill: "Purification of Gaia", work: "Planting Lv2, Handiwork Lv2, Medicine Production Lv3, Transporting Lv1, Gathering Lv2"},
            {no: "079", name: "Sibelyx", elements: ["Ice"], skill: "Silk Maker", work: "Medicine Production Lv2, Cooling Lv2, Farming Lv1"},
            {no: "080", name: "Elphidran", elements: ["Dragon"], skill: "Amicable Holy Dragon", work: "Lumbering Lv2"},
            {no: "080B", name: "Elphidran Aqua", elements: ["Water", "Dragon"], skill: "Amicable Holy Dragon", work: "Lumbering Lv2, Watering Lv1"},
            {no: "081", name: "Kelpsea", elements: ["Water"], skill: "Aqua Spout", work: "Watering Lv1"},
            {no: "081B", name: "Kelpsea Ignis", elements: ["Fire"], skill: "Flame Spout", work: "Kindling Lv1"},
            {no: "082", name: "Azurobe", elements: ["Water", "Dragon"], skill: "Waterwing Dance", work: "Watering Lv3"},
            {no: "082B", name: "Azurobe Cryst", elements: ["Ice", "Dragon"], skill: "Icewing Dance", work: "Cooling Lv3"},
            {no: "083", name: "Cryolinx", elements: ["Ice"], skill: "Dragon Hunter", work: "Handiwork Lv1, Lumbering Lv2, Cooling Lv3"},
            {no: "083B", name: "Cryolinx Terra", elements: ["Ground"], skill: "Dragon Hunter", work: "Handiwork Lv1, Lumbering Lv2, Mining Lv3"},
            {no: "084", name: "Blazehowl", elements: ["Fire"], skill: "Hellflame Lion", work: "Kindling Lv3, Lumbering Lv2"},
            {no: "084B", name: "Blazehowl Noct", elements: ["Dark"], skill: "Hellflame Lion", work: "Lumbering Lv2"},
            {no: "085", name: "Relaxaurus", elements: ["Dragon", "Water"], skill: "Hungry Missile", work: "Transporting Lv1, Watering Lv2"},
            {no: "085B", name: "Relaxaurus Lux", elements: ["Dragon", "Electric"], skill: "Hungry Missile", work: "Transporting Lv1, Generating Electricity Lv2"},
            {no: "086", name: "Broncherry", elements: ["Grass"], skill: "Overaffectionate", work: "Planting Lv3"},
            {no: "086B", name: "Broncherry Aqua", elements: ["Water"], skill: "Overaffectionate", work: "Watering Lv3"},
            {no: "087", name: "Petallia", elements: ["Grass"], skill: "Blessing of the Flower Spirit", work: "Planting Lv3, Handiwork Lv2, Medicine Production Lv2, Transporting Lv1, Gathering Lv2"},
            {no: "088", name: "Reptyro", elements: ["Fire", "Ground"], skill: "Ore-Loving Beast", work: "Kindling Lv3, Mining Lv3"},
            {no: "088B", name: "Reptyro Cryst", elements: ["Ice", "Ground"], skill: "Ore-Loving Beast", work: "Cooling Lv3, Mining Lv3"},
            {no: "089", name: "Kingpaca", elements: ["Neutral"], skill: "King of Muscles", work: "Gathering Lv1"},
            {no: "089B", name: "Kingpaca Cryst", elements: ["Ice"], skill: "King of Muscles", work: "Gathering Lv1, Cooling Lv1"},
            {no: "090", name: "Mammorest", elements: ["Grass"], skill: "Gaia Crusher", work: "Planting Lv2, Lumbering Lv2, Mining Lv2"},
            {no: "090B", name: "Mammorest Cryst", elements: ["Ice"], skill: "Gaia Crusher", work: "Lumbering Lv2, Mining Lv2, Cooling Lv2"},
            {no: "091", name: "Wumpo", elements: ["Ice"], skill: "Guardian of the Snowy Mountain", work: "Handiwork Lv2, Lumbering Lv3, Transporting Lv4, Cooling Lv2"},
            {no: "091B", name: "Wumpo Botan", elements: ["Grass"], skill: "Guardian of the Snowy Mountain", work: "Planting Lv2, Handiwork Lv2, Lumbering Lv3, Transporting Lv4"},
            {no: "092", name: "Warsect", elements: ["Ground", "Grass"], skill: "Hard Armor", work: "Planting Lv1, Handiwork Lv1, Lumbering Lv3, Transporting Lv3"},
            {no: "092B", name: "Warsect Terra", elements: ["Ground"], skill: "Hard Armor", work: "Handiwork Lv1, Lumbering Lv3, Transporting Lv3, Mining Lv1"},
            {no: "093", name: "Fenglope", elements: ["Neutral"], skill: "Wind and Clouds", work: "Lumbering Lv2"},
            {no: "093B", name: "Fenglope Lux", elements: ["Electric"], skill: "Wind and Clouds", work: "Lumbering Lv2, Generating Electricity Lv1"},
            {no: "094", name: "Felbat", elements: ["Dark"], skill: "Life Steal", work: "Medicine Production Lv3"},
            {no: "095", name: "Quivern", elements: ["Dragon"], skill: "Sky Dragon's Affection", work: "Handiwork Lv1, Transporting Lv3, Gathering Lv2, Mining Lv2"},
            {no: "095B", name: "Quivern Botan", elements: ["Grass", "Dragon"], skill: "Sky Dragon's Affection", work: "Planting Lv1, Handiwork Lv1, Transporting Lv3, Gathering Lv2, Mining Lv2"},
            {no: "096", name: "Blazamut", elements: ["Fire"], skill: "Magma Kaiser", work: "Kindling Lv3, Mining Lv4"},
            {no: "096B", name: "Blazamut Ryu", elements: ["Fire", "Dragon"], skill: "Magma Kaiser", work: "Kindling Lv4, Mining Lv4"},
            {no: "097", name: "Helzephyr", elements: ["Dark"], skill: "Wings of Death", work: "Transporting Lv3"},
            {no: "097B", name: "Helzephyr Lux", elements: ["Electric"], skill: "Wings of Death", work: "Transporting Lv3, Generating Electricity Lv1"},
            {no: "098", name: "Astegon", elements: ["Dragon", "Dark"], skill: "Black Ankylosaur", work: "Handiwork Lv1, Mining Lv4"},
            {no: "099", name: "Menasting", elements: ["Dark", "Ground"], skill: "Steel Scorpion", work: "Lumbering Lv2, Mining Lv3"},
            {no: "099B", name: "Menasting Terra", elements: ["Ground"], skill: "Steel Scorpion", work: "Lumbering Lv2, Mining Lv4"},
            {no: "100", name: "Anubis", elements: ["Ground"], skill: "Guardian of the Desert", work: "Handiwork Lv4, Transporting Lv2, Mining Lv3"},
            {no: "101", name: "Jormuntide", elements: ["Dragon", "Water"], skill: "Stormbringer Sea Dragon", work: "Watering Lv4"},
            {no: "101B", name: "Jormuntide Ignis", elements: ["Dragon", "Fire"], skill: "Stormbringer Sea Dragon", work: "Kindling Lv4"},
            {no: "102", name: "Suzaku", elements: ["Fire"], skill: "Wings of Flame", work: "Kindling Lv3"},
            {no: "102B", name: "Suzaku Aqua", elements: ["Water"], skill: "Wings of Flame", work: "Watering Lv3"},
            {no: "103", name: "Grizzbolt", elements: ["Electric"], skill: "Yellow Tank", work: "Handiwork Lv2, Lumbering Lv2, Transporting Lv3, Generating Electricity Lv3"},
            {no: "104", name: "Lyleen", elements: ["Grass"], skill: "Harvest Goddess", work: "Planting Lv4, Handiwork Lv3, Gathering Lv2, Medicine Production Lv3"},
            {no: "104B", name: "Lyleen Noct", elements: ["Dark"], skill: "Harvest Goddess", work: "Handiwork Lv3, Gathering Lv2, Medicine Production Lv3"},
            {no: "105", name: "Faleris", elements: ["Fire"], skill: "Scorching Predator", work: "Kindling Lv3, Transporting Lv3"},
            {no: "105B", name: "Faleris Aqua", elements: ["Water"], skill: "Scorching Predator", work: "Watering Lv3, Transporting Lv3"},
            {no: "106", name: "Orserk", elements: ["Dragon"], skill: "Ferocious Thunder Dragon", work: "Generating Electricity Lv4, Handiwork Lv2, Transporting Lv3"},
            {no: "107", name: "Shadowbeak", elements: ["Dark"], skill: "Modified DNA", work: "Gathering Lv1"},
            {no: "108", name: "Paladius", elements: ["Neutral"], skill: "Holy Knight", work: "Gathering Lv1"},
            {no: "109", name: "Necromus", elements: ["Dark"], skill: "Cursed Knight", work: "Gathering Lv1"},
            {no: "110", name: "Frostallion", elements: ["Ice"], skill: "Ice Steed", work: "Cooling Lv4"},
            {no: "110B", name: "Frostallion Noct", elements: ["Dark"], skill: "Dark Steed", work: ""},
            {no: "111", name: "Jetragon", elements: ["Dragon"], skill: "Aerial Missile", work: "Gathering Lv1"},
            {no: "112", name: "Bellanoir", elements: ["Dark"], skill: "Phantom Veil", work: ""},
            {no: "112B", name: "Bellanoir Libero", elements: ["Dark"], skill: "Phantom Veil Ultra", work: ""},
            {no: "113", name: "Selyne", elements: ["Neutral"], skill: "Moonbeam", work: "Handiwork Lv4"},
            {no: "114", name: "Croajiro", elements: ["Water"], skill: "Macho Frog", work: "Watering Lv1, Handiwork Lv1, Gathering Lv1, Transporting Lv1"},
            {no: "114B", name: "Croajiro Noct", elements: ["Dark"], skill: "Shadow Stance", work: "Handiwork Lv1, Gathering Lv1, Transporting Lv1"},
            {no: "115", name: "Lullu", elements: ["Water"], skill: "Aqua Heal", work: "Medicine Production Lv1"},
            {no: "116", name: "Shroomer", elements: ["Grass"], skill: "Spore Cloud", work: "Planting Lv1, Gathering Lv1"},
            {no: "116B", name: "Shroomer Noct", elements: ["Dark"], skill: "Spore Cloud", work: "Gathering Lv1"},
            {no: "117", name: "KiKit", elements: ["Ground"], skill: "Rollin' Full Oil", work: "Mining Lv1"},
            {no: "118", name: "Sootseer", elements: ["Dark", "Fire"], skill: "Grave Robber", work: "Kindling Lv1, Handiwork Lv2, Gathering Lv1, Mining Lv2, Farming Lv1"},
            {no: "119", name: "Prixter", elements: ["Ground"], skill: "Drill Spiral", work: "Mining Lv2"},
            {no: "120", name: "Knocklem", elements: ["Ground"], skill: "Steel Gaurdian Mode", work: "Gathering Lv3, Mining Lv4, Transporting Lv4"},
            {no: "121", name: "Yakumo", elements: ["Dark"], skill: "Shadow Lurker", work: "Gathering Lv2"},
            {no: "122", name: "Dogen", elements: ["Neutral"], skill: "Homeward Prayer", work: "Handiwork Lv3, Gathering Lv2, Lumbering Lv2, Medicine Production Lv1, Transporting Lv2"},
            {no: "123", name: "Dazemu", elements: ["Ground"], skill: "Sand Sprint", work: "Gathering Lv2"},
            {no: "124", name: "Mimog", elements: ["Neutral"], skill: "Mimic", work: "Handiwork Lv2"},
            {no: "125", name: "Xenovader", elements: ["Dark"], skill: "Alien Technology", work: "Handiwork Lv3"},
            {no: "126", name: "Xenogard", elements: ["Dark"], skill: "Shield Bearer", work: "Handiwork Lv2"},
            {no: "127", name: "Xenolord", elements: ["Dark"], skill: "Supreme Alien", work: "Handiwork Lv4"},
            {no: "128", name: "Nitemary", elements: ["Dark"], skill: "Nightmare", work: "Gathering Lv2"},
            {no: "129", name: "Starryon", elements: ["Electric"], skill: "Star Power", work: "Generating Electricity Lv3"},
            {no: "130", name: "Silvegis", elements: ["Ice"], skill: "Frost Guard", work: "Cooling Lv3"},
            {no: "131", name: "Smokie", elements: ["Fire"], skill: "Smoke Screen", work: "Kindling Lv2"},
            {no: "132", name: "Celesdir", elements: ["Neutral"], skill: "Celestial Guide", work: "Transporting Lv2"},
            {no: "133", name: "Omascul", elements: ["Water"], skill: "Tidal Force", work: "Watering Lv3"},
            {no: "134", name: "Splatterina", elements: ["Water"], skill: "Ink Splash", work: "Watering Lv2, Handiwork Lv2"},
            {no: "135", name: "Tarantriss", elements: ["Ground"], skill: "Web Trap", work: "Mining Lv2"},
            {no: "136", name: "Azurmane", elements: ["Water"], skill: "Aqua Mane", work: "Watering Lv3"},
            {no: "137", name: "Bastigor", elements: ["Ground"], skill: "Rock Shield", work: "Mining Lv3"},
            {no: "138", name: "Prunelia", elements: ["Grass"], skill: "Pruning", work: "Planting Lv3"},
            {no: "139", name: "Nyafia", elements: ["Dark"], skill: "Shadow Cat", work: "Gathering Lv2"},
            {no: "140", name: "Gildane", elements: ["Ground"], skill: "Gold Rush", work: "Mining Lv3, Farming Lv1"},
            // Tides of Terraria Update Pals
            {no: "141", name: "Herbil", elements: ["Grass", "Neutral"], skill: "Herbil Pulse", work: "Medicine Production Lv2, Planting Lv1"},
            {no: "142", name: "Icelyn", elements: ["Ice"], skill: "Icewing Dance", work: "Cooling Lv3"},
            {no: "143", name: "Fuack Ignis", elements: ["Fire"], skill: "Fire Tackle", work: "Kindling Lv1, Watering Lv1, Handiwork Lv1, Transporting Lv1"},
            {no: "144", name: "Palumba", elements: ["Grass"], skill: "Samba Step", work: "Planting Lv2, Gathering Lv2, Mining Lv3"},
            {no: "145", name: "Braloha", elements: ["Grass", "Ground"], skill: "Balmy Weather", work: "Planting Lv4, Gathering Lv4, Mining Lv2"},
            {no: "146", name: "Munchill", elements: ["Ice"], skill: "Icy Maw", work: "Watering Lv1, Cooling Lv2, Transporting Lv1"},
            {no: "147", name: "Polapup", elements: ["Ice"], skill: "Rider of the Snowy Mountain", work: "Watering Lv2, Cooling Lv3"},
            {no: "148", name: "Turtacle", elements: ["Water"], skill: "Spikey Carrier", work: "Watering Lv2, Mining Lv1, Transporting Lv2"},
            {no: "148B", name: "Turtacle Terra", elements: ["Ground"], skill: "Spikey Carrier", work: "Mining Lv2, Transporting Lv2"},
            {no: "149", name: "Jellroy", elements: ["Water"], skill: "Royal Jelly", work: "Watering Lv3, Medicine Production Lv2"},
            {no: "150", name: "Jelliette", elements: ["Water"], skill: "Graceful Swim", work: "Watering Lv2, Handiwork Lv1"},
            {no: "151", name: "Gloopie", elements: ["Water", "Dark"], skill: "Gloopy Grip", work: "Watering Lv1, Transporting Lv1"},
            {no: "152", name: "Finsider", elements: ["Water"], skill: "Weapon Weight Reduction", work: "Watering Lv1, Transporting Lv1"},
            {no: "152B", name: "Finsider Ignis", elements: ["Fire"], skill: "Weapon Weight Reduction", work: "Kindling Lv1, Transporting Lv1"},
            {no: "153", name: "Ghangler", elements: ["Water"], skill: "Deep Sea Fisher", work: "Watering Lv2, Gathering Lv1"},
            {no: "153B", name: "Ghangler Ignis", elements: ["Fire"], skill: "Deep Sea Fisher", work: "Kindling Lv2, Gathering Lv1"},
            {no: "154", name: "Whalaska", elements: ["Water"], skill: "Ocean Lord", work: "Watering Lv4, Transporting Lv2"},
            {no: "154B", name: "Whalaska Ignis", elements: ["Fire"], skill: "Ocean Lord", work: "Kindling Lv4, Transporting Lv2"},
            {no: "155", name: "Neptilius", elements: ["Water"], skill: "Tidal Sovereign", work: "Watering Lv4"}
        ];
        let filteredData = [...palData];
        let palStats = {};
        let medalStats = {};

        function renderTable() {
            const tbody = document.getElementById('palTableBody');
            tbody.innerHTML = '';

            filteredData.forEach(pal => {
                const caught = palStats[pal.no] || 0;
                const hasMedal = medalStats[pal.no] || false;
                const needed = Math.max(0, 12 - caught);
                const row = document.createElement('tr');
                
                let elementsHtml = pal.elements.map(el => 
                    `<span class="element ${el.toLowerCase()}">${el}</span>`
                ).join('');

                let neededClass = 'none';
                if (caught >= 12) neededClass = 'complete';
                else if (caught > 0) neededClass = 'partial';

                row.innerHTML = `
                    <td class="pal-number">${pal.no}</td>
                    <td class="pal-name"><a href="https://paldeck.cc/pals/${(() => {
                        return formatPalNo(pal.no);
                    })()}" target="_blank">${pal.name}</a></td>
                    <td>${elementsHtml}</td>
                    <td>${pal.skill}</td>
                    <td>${pal.work}</td>
                    <td><input type="number" class="caught-input" min="0" max="999" value="${caught}" data-pal="${pal.no}" onchange="updateCaught(this)"></td>
                    <td><div class="needed ${neededClass}">${needed}</div></td>
                    <td><input type="checkbox" class="medal-checkbox" ${hasMedal ? 'checked' : ''} data-pal="${pal.no}" onchange="updateMedal(this)"></td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateCaught(input) {
            const palNo = input.dataset.pal;
            const caught = parseInt(input.value) || 0;
            palStats[palNo] = caught;
            localStorage.setItem('palworldStats', JSON.stringify(palStats));
            updateStats();
            renderTable();
        }

        function updateMedal(checkbox) {
            const palNo = checkbox.dataset.pal;
            medalStats[palNo] = checkbox.checked;
            localStorage.setItem('palworldMedals', JSON.stringify(medalStats));
            updateStats();
        }

        function updateStats() {
            const totalPals = palData.length;
            const completePals = Object.values(palStats).filter(count => count >= 12).length;
            const totalCaught = Object.values(palStats).reduce((sum, count) => sum + count, 0);
            const medalsEarned = Object.values(medalStats).filter(hasMedal => hasMedal).length;
            const progressPercent = Math.round((completePals / totalPals) * 100);

            document.getElementById('totalPals').textContent = totalPals;
            document.getElementById('completePals').textContent = completePals;
            document.getElementById('totalCaught').textContent = totalCaught;
            document.getElementById('medalsEarned').textContent = medalsEarned;
            document.getElementById('progressPercent').textContent = progressPercent + '%';
        }

        function filterPals(filterType) {
            if (filterType) {
                document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelector(`[data-filter="${filterType}"]`).classList.add('active');
            }

            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;

            filteredData = palData.filter(pal => {
                const matchesSearch = pal.name.toLowerCase().includes(searchTerm) || 
                                    pal.no.includes(searchTerm) ||
                                    pal.elements.some(element => element.toLowerCase().includes(searchTerm));
                
                if (!matchesSearch) return false;

                const caught = palStats[pal.no] || 0;
                switch(activeFilter) {
                    case 'all': return true;
                    case 'needed': return caught < 12;
                    case 'complete': return caught >= 12;
                    default: return true;
                }
            });

            renderTable();
        }

        function searchPals() {
            filterPals(); // Call without parameter to keep current filter
        }

        function exportToCSV() {
            let csv = 'Pal Number,Pal Name,Elements,Partner Skill,Work Suitability,Caught,Still Need,Medal Earned\n';
            
            palData.forEach(pal => {
                const caught = palStats[pal.no] || 0;
                const hasMedal = medalStats[pal.no] || false;
                const needed = Math.max(0, 12 - caught);
                const elements = pal.elements.join('/');
                csv += `"${pal.no}","${pal.name}","${elements}","${pal.skill}","${pal.work}","${caught}","${needed}","${hasMedal ? 'Yes' : 'No'}"\n`;
            });

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'palworld_collection_tracker.csv';
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function importFromCSV(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const csv = e.target.result;
                    const lines = csv.split('\n');
                    
                    // Skip header row
                    for (let i = 1; i < lines.length; i++) {
                        const line = lines[i].trim();
                        if (!line) continue;
                        
                        // Parse CSV line (handle quoted fields)
                        const fields = parseCSVLine(line);
                        if (fields.length < 8) continue;
                        
                        const palNumber = fields[0];
                        const caught = parseInt(fields[5]) || 0;
                        const medalEarned = fields[7].toLowerCase() === 'yes';
                        
                        // Update stats
                        if (palNumber) {
                            palStats[palNumber] = caught;
                            medalStats[palNumber] = medalEarned;
                        }
                    }
                    
                    // Save to localStorage
                    localStorage.setItem('palworldStats', JSON.stringify(palStats));
                    localStorage.setItem('palworldMedals', JSON.stringify(medalStats));
                    
                    // Update display
                    updateStats();
                    renderTable();
                    
                    // Show success message
                    showNotification('✅ CSV imported successfully!', 'success');
                    
                } catch (error) {
                    console.error('Import error:', error);
                    showNotification('❌ Error importing CSV. Please check the file format.', 'error');
                }
            };
            
            reader.readAsText(file);
            // Clear the input so the same file can be imported again
            event.target.value = '';
        }

        function parseCSVLine(line) {
            const fields = [];
            let current = '';
            let inQuotes = false;
            let i = 0;
            
            while (i < line.length) {
                const char = line[i];
                
                if (char === '"') {
                    if (inQuotes && line[i + 1] === '"') {
                        // Escaped quote
                        current += '"';
                        i += 2;
                    } else {
                        // Toggle quote state
                        inQuotes = !inQuotes;
                        i++;
                    }
                } else if (char === ',' && !inQuotes) {
                    // Field separator
                    fields.push(current);
                    current = '';
                    i++;
                } else {
                    current += char;
                    i++;
                }
            }
            
            // Add the last field
            fields.push(current);
            
            return fields;
        }

        function showNotification(message, type) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                background: ${type === 'success' ? '#22c55e' : '#ef4444'};
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('input', searchPals);
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                filterPals(e.target.dataset.filter);
            });
        });

        // Load saved data and initialize
        const savedStats = localStorage.getItem('palworldStats');
        const savedMedals = localStorage.getItem('palworldMedals');
        if (savedStats) {
            palStats = JSON.parse(savedStats);
        }
        if (savedMedals) {
            medalStats = JSON.parse(savedMedals);
        }

        function formatPalNo(palNo) {
            return palNo.toString().replace(/^0+(?=\d)/, '');
        }

        // Fix for palData elements array
        palData.forEach(pal => {
            if (typeof pal.elements === 'string') {
                pal.elements = [pal.elements];
            }
        });

        updateStats();
        renderTable();

                // Parallax effect for table background
        document.addEventListener('mousemove', (e) => {
            const tableBackground = document.getElementById('tableBackground');
            if (tableBackground) {
                const mouseX = e.clientX / window.innerWidth;
                const mouseY = e.clientY / window.innerHeight;
                
                const moveX = (mouseX - 0.5) * 20; // Adjust multiplier for intensity
                const moveY = (mouseY - 0.5) * 20;
                
                tableBackground.style.transform = `scale(1.1) translate(${moveX}px, ${moveY}px)`;
            }
        });
    </script>
</body>
</html>
